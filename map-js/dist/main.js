var maputils;(()=>{"use strict";var e={d:(r,o)=>{for(var t in o)e.o(o,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:o[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{exportedForTesting:()=>n});const o={map:null,currentPolygonLayer:null,currentPolygonCoords:null,s2CellsLayerGroup:null,currentS2Cells:null,setCurrentPolygonCoords(e){this.currentPolygonCoords=e.map((e=>({Lat:e.lat,Lng:e.lng}))),this.currentPolygonCoords.reverse()}};function t(e,r){var o=parseInt(e,16).toString(2);o=o.slice(0,o.length-1);var t=parseInt(o.slice(0,3),2).toString(),l=parseInt(o.slice(3),2).toString(4);return(l=l.split("")).reverse(),l.push(t),l.join(".")+"."+r}function l(e){if(o.currentS2Cells){var r=[];for(let n in o.currentS2Cells){var l=t(n,e);r.push(l)}return console.log(r),r}alert("Please generate S2 cells first")}!function(){var e=L.map("map").setView([40.44266,-79.94327],17);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(e),e.pm.addControls({drawMarker:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!0,drawCircle:!1,drawText:!1});const r=new GeoSearch.OpenStreetMapProvider,t=new GeoSearch.GeoSearchControl({provider:r,style:"bar"});e.addControl(t),e.on("pm:drawstart",(r=>{o.currentPolygonLayer&&(e.removeLayer(o.currentPolygonLayer),o.currentPolygonLayer=null,o.currentPolygonCoords=null),o.s2CellsLayerGroup&&(e.removeLayer(o.s2CellsLayerGroup),o.s2CellsLayerGroup=null)})),e.on("pm:create",(e=>{if("Polygon"===e.shape){const r=e.layer,t=r.getLatLngs()[0];o.setCurrentPolygonCoords(t),o.currentPolygonLayer=r}})),o.map=e}(),document.getElementById("generate-s2-button").addEventListener("click",(()=>{!function(){if(o.currentPolygonCoords){var e=document.getElementById("max-s2-cells").value;if(e){var r=function(e,r){return GetS2CellsInRegion(r,1,30,e)}(e=parseInt(e),o.currentPolygonCoords),t=[];for(let e in r){var l=r[e];l=l.map((e=>[e.Lat,e.Lng]));var n=L.polygon(l,{color:"red",fillOpacity:.1,opacity:.5,weight:2});t.push(n)}o.s2CellsLayerGroup&&o.map.removeLayer(o.s2CellsLayerGroup),o.s2CellsLayerGroup=L.layerGroup(t),o.s2CellsLayerGroup.addTo(o.map),o.currentS2Cells=r}else alert("Please enter a number of cells")}else alert("Please draw a polygon first")}()})),document.getElementById("generate-zonefile-button").addEventListener("click",(()=>{l()}));var n={getGeoDomainFromS2CellID:t,getGeoDomainsForCurrentCells:l,globalState:o};maputils=r})();