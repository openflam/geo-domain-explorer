// The region coverer wasm file is loaded in test.html (assets/scripts/load_wasm.js)
describe('RegionCoverer', function () {
    it('Region coverer should return the correct cells', function () {
        const points = [
            { Lat: 40.44093709781874, Lng: -79.9479516187508 },
            { Lat: 40.430354939116775, Lng: -79.95026748326119 },
            { Lat: 40.429963221741005, Lng: -79.93387714974523 },
            { Lat: 40.43884693227271, Lng: -79.93490617932366 },
        ];
        const minLevel = 1;
        const maxLevel = 30;
        const maxCells = 5;

        const cells = GetS2CellsInRegion(points, minLevel, maxLevel, maxCells);
        const expectedCellIDs = {
            "8834f18c": [
                {
                    "Lat": 40.440203083567475,
                    "Lng": -79.95284509899736
                },
                {
                    "Lat": 40.430114954594195,
                    "Lng": -79.95284509899736
                },
                {
                    "Lat": 40.42913567044082,
                    "Lng": -79.94165489156386
                },
                {
                    "Lat": 40.439223743987824,
                    "Lng": -79.94165489156386
                }
            ],
            "8834f1f4": [
                {
                    "Lat": 40.439223743987824,
                    "Lng": -79.94165489156386
                },
                {
                    "Lat": 40.42913567044082,
                    "Lng": -79.94165489156386
                },
                {
                    "Lat": 40.42815515334017,
                    "Lng": -79.93046325226744
                },
                {
                    "Lat": 40.438243171379284,
                    "Lng": -79.93046325226744
                }
            ],
            "8834f21c": [
                {
                    "Lat": 40.44931008907391,
                    "Lng": -79.94165489156386
                },
                {
                    "Lat": 40.439223743987824,
                    "Lng": -79.94165489156386
                },
                {
                    "Lat": 40.438243171379284,
                    "Lng": -79.93046325226744
                },
                {
                    "Lat": 40.448329461088576,
                    "Lng": -79.93046325226744
                }
            ],
            "8834f221": [
                {
                    "Lat": 40.444756970347576,
                    "Lng": -79.94725017434047
                },
                {
                    "Lat": 40.439713567882826,
                    "Lng": -79.94725017434047
                },
                {
                    "Lat": 40.439223743987824,
                    "Lng": -79.94165489156386
                },
                {
                    "Lat": 40.444267132615465,
                    "Lng": -79.94165489156386
                }
            ],
            "8834f2275": [
                {
                    "Lat": 40.44109686769231,
                    "Lng": -79.94864893908442
                },
                {
                    "Lat": 40.43983597569687,
                    "Lng": -79.94864893908442
                },
                {
                    "Lat": 40.439713567882826,
                    "Lng": -79.94725017434047
                },
                {
                    "Lat": 40.440974459013454,
                    "Lng": -79.94725017434047
                }
            ]
        };
        assert.deepEqual(cells, expectedCellIDs);
    });
});