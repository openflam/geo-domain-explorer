var maputils;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{exportedForTesting:()=>i});const r={map:null,currentPolygonLayer:null,currentPolygonCoords:null,s2CellsLayerGroup:null,currentS2Cells:null,setCurrentPolygonCoords(e){this.currentPolygonCoords=e.map((e=>({Lat:e.lat,Lng:e.lng}))),this.currentPolygonCoords.reverse()}};const n=function(e,t){const r=JSON.parse(JSON.stringify(e));return t=t||"; Zone: {zone}\n; Exported  (yyyy-mm-ddThh:mm:ss.sssZ): {datetime}\n\n{$origin}\n{$ttl}\n\n; SOA Record\n{name} {ttl}\tIN\tSOA\t{mname}{rname}(\n{serial} ;serial\n{refresh} ;refresh\n{retry} ;retry\n{expire} ;expire\n{minimum} ;minimum ttl\n)\n\n; NS Records\n{ns}\n\n; MX Records\n{mx}\n\n; A Records\n{a}\n\n; AAAA Records\n{aaaa}\n\n; CNAME Records\n{cname}\n\n; PTR Records\n{ptr}\n\n; TXT Records\n{txt}\n\n; SRV Records\n{srv}\n\n; SPF Records\n{spf}\n\n; CAA Records\n{caa}\n\n; DS Records\n{ds}\n\n",t=function(e,t){let r="";return void 0!==e&&(r+="$ORIGIN "+e),t.replace("{$origin}",r)}(r.$origin,t),t=function(e,t){let r="";return void 0!==e&&(r+="$TTL "+e),t.replace("{$ttl}",r)}(r.$ttl,t),t=function(e,t){let r=t;return e.name=e.name||"@",e.ttl=e.ttl||"",Object.keys(e).map((t=>{r=r.replace("{"+t+"}",e[t]+"\t")})),r}(r.soa,t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tNS\t"+t.host+"\n";return t.replace("{ns}",r)}(r.ns||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tA\t"+t.ip+"\n";return t.replace("{a}",r)}(r.a||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tAAAA\t"+t.ip+"\n";return t.replace("{aaaa}",r)}(r.aaaa||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tCNAME\t"+t.alias+"\n";return t.replace("{cname}",r)}(r.cname||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tMX\t"+t.preference+"\t"+t.host+"\n";return t.replace("{mx}",r)}(r.mx||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tPTR\t"+t.host+"\n";return t.replace("{ptr}",r)}(r.ptr||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tTXT\t"+t.txt+"\n";return t.replace("{txt}",r)}(r.txt||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tSRV\t"+t.priority+"\t",r+=t.weight+"\t",r+=t.port+"\t",r+=t.target+"\n";return t.replace("{srv}",r)}(r.srv||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+="IN\tSPF\t"+t.data+"\n";return t.replace("{spf}",r)}(r.spf||[],t),t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+=`IN\tCAA\t${t.flags}\t${t.tag}\t${t.value}\n`;return t.replace("{caa}",r)}(r.caa||[],t),(t=function(e,t){return(t=(t=t.replace("{zone}",e.$origin||e.soa.name||"")).replace("{datetime}",(new Date).toISOString())).replace("{time}",Math.round(Date.now()/1e3))}(r,t=function(e,t){let r="";for(let t of e)r+=(t.name||"@")+"\t",t.ttl&&(r+=t.ttl+"\t"),r+=`IN\tDS\t${t.key_tag}\t${t.algorithm}\t${t.digest_type}\t${t.digest}\n`;return t.replace("{ds}",r)}(r.ds||[],t))).replace(/\n{2,}/gim,"\n\n")};function l(e,t){var r=parseInt(e,16).toString(2);r=r.slice(0,r.length-1);var n=parseInt(r.slice(0,3),2).toString(),l=parseInt(r.slice(3),2).toString(4);return(l=l.split("")).reverse(),l.push(n),l.join(".")+"."+t}function o(e){if(r.currentS2Cells){var t=[];for(let o in r.currentS2Cells){var n=l(o,e);t.push(n)}return t}alert("Please generate S2 cells first")}const a={a:"ip",cname:"alias",txt:"txt"};!function(){var e=L.map("map").setView([40.44266,-79.94327],17);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(e),e.pm.addControls({drawMarker:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!0,drawCircle:!1,drawText:!1});const t=new GeoSearch.OpenStreetMapProvider,n=new GeoSearch.GeoSearchControl({provider:t,style:"bar"});e.addControl(n),e.on("pm:drawstart",(t=>{r.currentPolygonLayer&&(e.removeLayer(r.currentPolygonLayer),r.currentPolygonLayer=null,r.currentPolygonCoords=null),r.s2CellsLayerGroup&&(e.removeLayer(r.s2CellsLayerGroup),r.s2CellsLayerGroup=null,r.currentS2Cells=null)})),e.on("pm:create",(e=>{if("Polygon"===e.shape){const t=e.layer,n=t.getLatLngs()[0];r.setCurrentPolygonCoords(n),r.currentPolygonLayer=t}})),r.map=e}(),document.getElementById("generate-s2-button").addEventListener("click",(()=>{!function(){if(r.currentPolygonCoords){var e=document.getElementById("max-s2-cells").value;if(e){var t=function(e,t){return GetS2CellsInRegion(t,1,30,e)}(e=parseInt(e),r.currentPolygonCoords),n=[];for(let e in t){var l=t[e];l=l.map((e=>[e.Lat,e.Lng]));var o=L.polygon(l,{color:"red",fillOpacity:.1,opacity:.5,weight:2});n.push(o)}r.s2CellsLayerGroup&&r.map.removeLayer(r.s2CellsLayerGroup),r.s2CellsLayerGroup=L.layerGroup(n),r.s2CellsLayerGroup.addTo(r.map),r.currentS2Cells=t}else alert("Please enter a number of cells")}else alert("Please draw a polygon first")}()}));const s=document.getElementById("dns-config-form");s.addEventListener("submit",(e=>{e.preventDefault(),s.checkValidity()?function(){var e=document.getElementById("dns-suffix").value;"."!=e[e.length-1]&&(e+=".");var t=document.getElementById("mname").value,r=document.getElementById("rname").value,l=document.getElementById("refresh").value,s=document.getElementById("retry").value,i=document.getElementById("expire").value,c=document.getElementById("minimum").value,u=document.getElementById("rr-type").value.toLowerCase(),m=document.getElementById("rr-data").value,p=document.getElementById("ttl").value,d=o(e);if(d){var f=function(e){var t="",r=Math.min(...e.map((e=>e.length)));for(let l=0;l<r;l++){var n=e[0][e[0].length-l-1];if(!e.every((e=>e[e.length-l-1]==n)))break;t=n+t}return t}(d),g={$origin:f=f.slice(1),$ttl:p,soa:{mname:t,rname:r,serial:Date.now().toString(),refresh:l,retry:s,expire:i,minimum:c}};g[u]=[];for(let e of d){var y=e.slice(0,e.length-f.length-1);g[u].push({name:y,[a[u]]:m})}var v=n(g);console.log(v)}}():s.reportValidity()}));var i={getGeoDomainFromS2CellID:l,getGeoDomainsForCurrentCells:o,globalState:r};maputils=t})();